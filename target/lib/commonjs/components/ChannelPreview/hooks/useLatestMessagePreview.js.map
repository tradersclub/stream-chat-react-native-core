{"version":3,"names":["_react","require","_ChatContext","_TranslationContext","getMessageSenderName","message","currentUserId","t","membersLength","_message$user","user","id","_message$user2","_message$user3","_message$user4","name","username","getMentionUsers","mentionedUser","Array","isArray","mentionUserString","reduce","acc","cur","userName","concat","length","replace","match","getLatestMessageDisplayText","channel","client","_message$attachments","bold","text","isMessageTypeDeleted","type","userID","members","Object","keys","state","messageSender","messageSenderText","boldOwner","includes","shortenedText","substring","mentionedUsers","mentioned_users","regEx","RegExp","_toConsumableArray2","split","index","test","push","command","attachments","getLatestMessageDisplayDate","tDateTimeParser","parserOutput","created_at","isDayOrMoment","isSame","Date","format","MessageReadStatus","exports","getLatestMessageReadStatus","readEvents","_message$user5","NOT_SENT_BY_CURRENT_USER","readList","read","messageUpdatedAt","updated_at","undefined","values","some","_ref","last_read","READ","UNREAD","getLatestMessagePreview","params","lastMessage","messages","messageObject","previews","status","channelStateLastMessage","useLatestMessagePreview","forceUpdate","_useChatContext","useChatContext","_useTranslationContex","useTranslationContext","channelConfigExists","getConfig","channelLastMessageString","_useState","useState","_useState2","_slicedToArray2","setReadEvents","_useState3","_useState4","latestMessagePreview","setLatestMessagePreview","readStatus","useEffect","_channel$getConfig","read_events"],"sourceRoot":"../../../../../src","sources":["components/ChannelPreview/hooks/useLatestMessagePreview.ts"],"mappings":"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","ignoreList":[]}
